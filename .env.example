# ===========================================
# BountyExpo Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values

# -----------------------------------------
# Database Configuration
# -----------------------------------------
# PostgreSQL connection string for main database
DATABASE_URL="postgresql://bountyexpo:bountyexpo123@localhost:5432/bountyexpo"

# -----------------------------------------
# Supabase Configuration (for Auth & RLS)
# -----------------------------------------
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_ANON_KEY="your-anon-key"
SUPABASE_JWT_SECRET="your-jwt-secret"

# -----------------------------------------
# Stripe Configuration
# -----------------------------------------
# Stripe secret key (server-side, starts with sk_)
# For PRODUCTION: Use sk_live_... (live mode keys)
# For DEVELOPMENT: Use sk_test_... (test mode keys)
# IMPORTANT: Never commit live keys to version control!
STRIPE_SECRET_KEY="sk_test_..."

# Stripe publishable key (client-side, starts with pk_)
STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Stripe webhook endpoint secret for payment events
# Create webhook at: https://dashboard.stripe.com/webhooks
# For local development: stripe listen --forward-to localhost:3001/webhooks/stripe
STRIPE_WEBHOOK_SECRET="whsec_..."

# -----------------------------------------
# API Server Configuration
# -----------------------------------------
# Port for the BountyExpo API server
PORT=3001
# Host binding (0.0.0.0 for Docker, localhost for local dev)
HOST=0.0.0.0
# Environment (development, production, test)
NODE_ENV=development

# -----------------------------------------
# Redis Configuration (Optional)
# -----------------------------------------
# Redis URL for idempotency and caching
# Format: redis://username:password@host:port
# For local development: redis://localhost:6379
# For production: Use managed Redis (AWS ElastiCache, Redis Cloud, etc.)
REDIS_URL="redis://localhost:6379"

# Enable/disable Redis idempotency
# Set to "true" for multi-instance deployments
# Set to "false" or omit for single-instance (uses in-memory fallback)
REDIS_ENABLED="false"

# -----------------------------------------
# Core API Configuration
# -----------------------------------------
# Base URL for API calls (development)
API_BASE_URL="http://localhost:3001"
# Request timeout in milliseconds
API_TIMEOUT=30000

# -----------------------------------------
# JWT Configuration
# -----------------------------------------
# Secret key for signing JWT tokens
JWT_SECRET="your-jwt-secret-key-should-be-long-and-random"
# Token expiration time
JWT_EXPIRES_IN="1h"
# Refresh token expiration
REFRESH_TOKEN_EXPIRES_IN="7d"

# -----------------------------------------
# React Native / Expo Configuration
# -----------------------------------------
# Supabase Edge Functions base URL — set this to route all API calls through
# Edge Functions instead of the legacy Node server.
# Format: https://<project-ref>.supabase.co/functions/v1
# Leave blank to keep using the Node server (EXPO_PUBLIC_API_URL below).
EXPO_PUBLIC_SUPABASE_FUNCTIONS_URL="https://your-project.supabase.co/functions/v1"

# Legacy Node server URL (used when EXPO_PUBLIC_SUPABASE_FUNCTIONS_URL is not set)
EXPO_PUBLIC_API_URL="http://localhost:3001"
# Public Stripe key (for mobile payments)
EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Supabase (Client) — required for posting bounties from the app
# These MUST be present for the mobile app to insert into Supabase directly.
EXPO_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
EXPO_PUBLIC_SUPABASE_ANON_KEY="your-anon-key"

# -----------------------------------------
# Development Tools (Optional)
# -----------------------------------------
# Enable development features
DEBUG=true
# Log level (error, warn, info, debug)
LOG_LEVEL="debug"

# -----------------------------------------
# Analytics & Monitoring Configuration
# -----------------------------------------
# Mixpanel project token for analytics
MIXPANEL_TOKEN="YOUR_MIXPANEL_TOKEN"
EXPO_PUBLIC_MIXPANEL_TOKEN="YOUR_MIXPANEL_TOKEN"

# Sentry DSN for error tracking
SENTRY_DSN="YOUR_SENTRY_DSN"
EXPO_PUBLIC_SENTRY_DSN="YOUR_SENTRY_DSN"

# Enable Sentry debug mode in development (optional)
# EXPO_PUBLIC_SENTRY_DEBUG=true
# SENTRY_DEBUG=true

# -----------------------------------------
# Google Places API Configuration
# -----------------------------------------
# Google Places API key for address autocomplete
# Get your API key at: https://console.cloud.google.com/google/maps-apis
# Required APIs: Places API, Geocoding API
# IMPORTANT: Restrict this key to specific platforms/IPs in production
EXPO_PUBLIC_GOOGLE_PLACES_API_KEY="your-google-places-api-key"

# -----------------------------------------
# Apple Pay Configuration
# -----------------------------------------
# Apple Merchant ID - must be registered in Apple Developer Portal
# Format: merchant.com.yourcompany.appname
# Register at: https://developer.apple.com/account/resources/identifiers
APPLE_MERCHANT_ID="merchant.com.bountyexpo.wallet"

# Stripe Webhook Secret for payment confirmations
# Create webhook at: https://dashboard.stripe.com/webhooks
# Events: payment_intent.succeeded, payment_intent.payment_failed, charge.refunded
STRIPE_WEBHOOK_SECRET="whsec_..."

# -----------------------------------------
# Apple Authentication Configuration
# -----------------------------------------
# Apple Service ID for Sign In with Apple
# Create at: https://developer.apple.com/account/resources/identifiers
# Must be configured with return URLs and domains
EXPO_PUBLIC_APPLE_AUTH_SERVICE_ID="com.bountyexpo.service"

# Apple Authentication Redirect URI
# Must be HTTPS and match Apple Service ID configuration
# Format: https://yourdomain.com/auth/callback
EXPO_PUBLIC_APPLE_AUTH_REDIRECT_URI="https://bountyfinder.app/auth/callback"

# -----------------------------------------
# Google Sign-In Configuration
# -----------------------------------------
# Google OAuth Client IDs for each platform
# Create at: https://console.cloud.google.com/apis/credentials
# Each platform needs a separate OAuth 2.0 Client ID

# iOS Client ID (OAuth 2.0 Client ID for iOS)
# Format: xxx-xxx.apps.googleusercontent.com
EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID=""

# Android Client ID (OAuth 2.0 Client ID for Android)
# Requires SHA-1 fingerprint: keytool -list -v -keystore ~/.android/debug.keystore
# Format: xxx-xxx.apps.googleusercontent.com
EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID=""

# Web Client ID (OAuth 2.0 Client ID for Web application)
# Used for web and as fallback
# Format: xxx-xxx.apps.googleusercontent.com
EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID=""